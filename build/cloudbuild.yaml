steps:
  - id: build-image
    name: "docker/compose:1.29.2"
    entrypoint: "docker-compose"
    args:
      [
        "-f",
        "docker-compose.yml",
        "build",
        "backend"
      ]
    waitFor: ["-"]
  
  - id: run-services
    name: "docker/compose:1.29.2"
    entrypoint: "docker-compose"
    args:
      [
        "-f",
        "docker-compose.yml",
        "up",
        "-d"
      ]
    waitFor: ["build-image"]
  
  - id: run-gogo-command
    name: "docker/compose:1.29.1"
    entrypoint: "docker"
    args:
      [
        "exec",
        "my-backend",
        "python", 
        "manage.py", 
        "gogo"
      ]
    waitFor: ["run-services"]
  
  - id: run-test
    name: "docker/compose:1.29.1"
    entrypoint: "docker"
    args:
      [
        "exec",
        "my-backend",
        "pytest" 
      ]
    waitFor: ["run-services"]